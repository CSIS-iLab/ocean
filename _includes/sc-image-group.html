{%- assign align_class = null -%}
{%- if include.align -%}
  {%- assign align_class = include.align | prepend: 'sc--float-' -%}
  {%- assign width_class = 'sc--float-large' -%}
{%- endif -%}
{%- if include.width -%}
  {%- assign width_class = 'sc--max' -%}
{%- endif -%}


{%- assign images = include.images | strip_newlines | split: "~"  -%}
{%- assign modes = include.modes | strip_newlines | split: "~"  -%}
{%- assign captions = include.captions | strip_newlines | split: "~"  -%}
{%- assign credits_array = include.credits | strip_newlines | split: "~"  -%}
{%- assign credits = '' | split: ',' -%}

{%- for item in credits_array -%}
  {%- assign credit = item | strip  -%}
  {%- if credit.size > 0 -%}
    {%- capture credit -%}<span class="sc-image-group__caption__source">({{ credit }})</span>{%- endcapture -%}
  {%- else -%}
    {% assign credit = "" -%}
  {%- endif -%}
  {% assign credits = credits | push: credit -%}
{%- endfor -%}


{%- assign labels="top,middle,bottom" | split: "," -%}

{%- capture group_caption -%}
  {%- if images.size == 2 %}
    <span class="sc-image-group__caption-label {{ labels[0] }}"> </span>
    {{ captions[0] }} {{ credits[0] }}
    <span class="sc-image-group__caption-label {{ labels[2] }}"> </span>
    {{ captions[1] }} {{ credits[1] }}
  {%- elsif images.size == 3 %}
    <span class="sc-image-group__caption-label {{ labels[0] }}"> </span>
    {{ captions[0] }} {{ credits[0] }}
    <span class="sc-image-group__caption-label {{ labels[1] }}"> </span>
    {{ captions[1] }} {{ credits[1] }}
    <span class="sc-image-group__caption-label {{ labels[2] }}"> </span>
    {{ captions[2] }} {{ credits[2] }}
  {%- endif -%}
{%- endcapture -%}


<div class="sc-image-group spotlight-component {{ align_class}} {{ width_class}}">

  <figure role="figure">
    <figure role="group" class="sc-image-group__images">
    {%- for image in images -%}
    {%- assign caption = captions[forloop.index0] -%}
    {%- assign credit = credits[forloop.index0] -%}

    {%- assign mode = null -%}
    {%- if modes[forloop.index0].size > 0 -%}
      {%- assign mode=modes[forloop.index0] | prepend: '--' | prepend: 'sc-image-group__images-single' -%}
    {%- endif -%}

      {%- include sc-single-image.html
        path=image
        figcaption=false
        caption=caption
        credit=credit
        class='sc-image-group__images-single'
        mode=mode
        -%}
    {%- endfor -%}
    </figure>
    <figcaption class="sc-image-group__caption">
      {{ group_caption }}
    </figcaption>
  </figure>
</div>
