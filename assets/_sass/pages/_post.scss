/*=============================
=            Posts            =
=============================*/

.post {
  $post: &;
  // prettier-ignore
  $width-offset: nth(map-get($map: $size__container-padding, $key: 'xlarge'), 2);

  &__header {
    position: relative;
    @include structure(
      $size__page-header-height--post,
      'height',
      ('medium', 'large', 'xlarge')
    );
    @include structure(
      $size__page-header-padding--post,
      'padding-bottom',
      ('medium', 'large', 'xlarge')
    );

    @include breakpoint('medium') {
      display: flex;
      flex-wrap: wrap;
      align-items: flex-end;
    }

    &::before {
      content: '';
      position: relative;
      top: 0;
      right: 50%;
      bottom: 0;
      left: 50%;
      z-index: -1;
      display: block;
      width: 100vw;
      height: return-map-value($size__page-header-height--post, 'small');
      margin-right: -50vw;
      margin-left: -50vw;
      @include bg-images('hero_commentary');
      background-repeat: no-repeat;
      background-position: center 25%;
      background-size: cover;

      @include breakpoint('medium') {
        position: absolute;
        height: unset;
        background-position-y: bottom;
      }

      @include breakpoint('xlarge') {
        width: calc(100vw + #{$width-offset});
      }
    }

    &-content {
      $margin-right-sizes: ('large', 'xlarge');
      margin-top: 1.5rem;
      margin-bottom: 1rem;

      @include breakpoint('medium') {
        flex: 1;
        margin-top: 0;
      }

      @include breakpoint('large') {
        // prettier-ignore
        margin-right: return-map-value($size__content-margin--post, 'large') * 2;
      }

      @include breakpoint('xlarge') {
        // prettier-ignore
        margin-right: nth(return-map-value($size__content-margin--post, 'xlarge'), 2) * 2;
      }
    }

    #{$post}-title {
      @extend %post-title;
      margin: 0.75rem 0;
    }
  }

  &__content {
    position: relative;
    @include structure($size__content-margin--post, 'margin');
    margin-bottom: 1rem;
    @include structure($size__content-padding, 'padding');

    @include breakpoint('medium') {
      border-left: 1px solid $color__gray-58;
    }

    &::after {
      @extend %content-side-gradient;
      top: -10px;
      bottom: -5rem;
    }
  }

  &__content-aside {
    background-color: $color__test;

    @include breakpoint('large') {
      float: right;
      width: $size__post-sidebar-width;
    }
  }

  &__content-body {
    @include structure(
      $size__post-body-padding-right,
      'padding-right',
      ('large', 'xlarge')
    );

    @include breakpoint('large') {
      width: calc(100% - #{$size__post-sidebar-width});
    }
  }

  &__footer {
    @include structure($size__content-margin--post, 'margin');
    @include structure($size__post-footer-padding-right, 'padding-right');
    background-color: $color__test;

    &-top {
      margin-bottom: 1rem;

      @include breakpoint('large') {
        display: flex;
      }
    }

    .keywords {
      margin-bottom: 1rem;
      @include structure(
        $size__post-body-padding-right,
        'padding-right',
        ('large', 'xlarge')
      );

      @include breakpoint('large') {
        flex: 0 0 auto;
        width: calc(100% - #{$size__post-sidebar-width});
        margin-bottom: 0;
      }
    }

    .share {
      background-color: $color__test;
      @include breakpoint('large') {
        flex: 1 1 auto;
        justify-content: flex-end;
      }
    }

    &-middle {
      position: relative;
      padding-top: 2rem;
      @include further-reading-padding;
      background-color: $color__test;
      @include full-width-background($color__test);

      &::after {
        @include breakpoint('medium') {
          display: none;
        }
      }
    }

    &-end {
      position: relative;
      @include related-content-margin;
      @include related-content-padding;
      background-color: $color__white;
    }
  }
}
